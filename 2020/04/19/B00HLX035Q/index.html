<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"aicsbook.github.io","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="基本信息名称： MongoDB权威指南(第2版)作者信息： 作者: 霍多罗夫 (Kristina Chodorow) [ 英文 pdf ] 简单介绍上一版广受好评，新版本在此基础上大幅扩充，内容更加全面、深入MongoDB项目组成员倾力打造MongoDB基础知识、进阶内容、高级管理任务一应俱全 目录12345678910111213141516171819202122232425262728293">
<meta property="og:type" content="article">
<meta property="og:title" content="MongoDB权威指南(第2版)">
<meta property="og:url" content="https://aicsbook.github.io/2020/04/19/B00HLX035Q/index.html">
<meta property="og:site_name" content="IT Books">
<meta property="og:description" content="基本信息名称： MongoDB权威指南(第2版)作者信息： 作者: 霍多罗夫 (Kristina Chodorow) [ 英文 pdf ] 简单介绍上一版广受好评，新版本在此基础上大幅扩充，内容更加全面、深入MongoDB项目组成员倾力打造MongoDB基础知识、进阶内容、高级管理任务一应俱全 目录12345678910111213141516171819202122232425262728293">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://ec4.images-amazon.com/images/I/518fJU-ijYL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA300_SH20_OU28_.jpg">
<meta property="article:published_time" content="2020-04-19T11:44:31.000Z">
<meta property="article:modified_time" content="2020-04-20T15:37:05.093Z">
<meta property="article:author" content="ryo">
<meta property="article:tag" content="数据库">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://ec4.images-amazon.com/images/I/518fJU-ijYL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA300_SH20_OU28_.jpg">

<link rel="canonical" href="https://aicsbook.github.io/2020/04/19/B00HLX035Q/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>MongoDB权威指南(第2版) | IT Books</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">IT Books</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">the it books</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://aicsbook.github.io/2020/04/19/B00HLX035Q/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="ryo">
      <meta itemprop="description" content="收集常见的 it 书籍，供学习之用">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="IT Books">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          MongoDB权威指南(第2版)
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-04-19 19:44:31" itemprop="dateCreated datePublished" datetime="2020-04-19T19:44:31+08:00">2020-04-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2020-04-20 23:37:05" itemprop="dateModified" datetime="2020-04-20T23:37:05+08:00">2020-04-20</time>
              </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="基本信息"><a href="#基本信息" class="headerlink" title="基本信息"></a>基本信息</h1><p>名称： MongoDB权威指南(第2版)<br>作者信息： 作者: 霍多罗夫 (Kristina Chodorow) [ 英文 pdf ]</p>
<h1 id="简单介绍"><a href="#简单介绍" class="headerlink" title="简单介绍"></a>简单介绍</h1><p>上一版广受好评，新版本在此基础上大幅扩充，内容更加全面、深入MongoDB项目组成员倾力打造MongoDB基础知识、进阶内容、高级管理任务一应俱全</p>
<h1 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br></pre></td><td class="code"><pre><span class="line">序</span><br><span class="line">前言</span><br><span class="line">第一部分 MongoDB介绍</span><br><span class="line">第1章 MongoDB简介 3</span><br><span class="line">1.1 易于使用 3</span><br><span class="line">1.2 易于扩展 4</span><br><span class="line">1.3 丰富的功能 4</span><br><span class="line">1.4 卓越的性能 5</span><br><span class="line">1.5 小结 5</span><br><span class="line">第2章 MongoDB基础知识 7</span><br><span class="line">2.1 文档 7</span><br><span class="line">2.2 集合 8</span><br><span class="line">2.2.1 动态模式 8</span><br><span class="line">2.2.2 命名 9</span><br><span class="line">2.3 数据库 10</span><br><span class="line">2.4 启动MongoDB 11</span><br><span class="line">2.5 MongoDBshell简介 12</span><br><span class="line">2.5.1 运行shell 12</span><br><span class="line">2.5.2 MongoDB客户端 13</span><br><span class="line">2.5.3 shell中的基本操作 14</span><br><span class="line">2.6 数据类型 16</span><br><span class="line">2.6.1 基本数据类型 16</span><br><span class="line">2.6.2 日期 18</span><br><span class="line">2.6.3 数组 18</span><br><span class="line">2.6.4 内嵌文档 19</span><br><span class="line">2.6.5 id和ObjectId 20 2.7 使用MongoDBshell 21 2.7.1 shell小贴士 22 2.7.2 使用shell执行脚本 23 2.7.3 创建mongorc.js文件 25 2.7.4 定制shell提示 26 2.7.5 编辑复合变量 26 2.7.6 集合命名注意事项 27 第3章 创建、更新和删除文档 29 3.1 插入并保存文档 29 3.1.1 批量插入 29 3.1.2 插入校验 30 3.2 删除文档 31 3.3 更新文档 32 3.3.1 文档替换 32 3.3.2 使用修改器 34 3.3.3 upsert 45 3.3.4 更新多个文档 47 3.3.5 返回被更新的文档 48 3.4 写入安全机制 50 第4章 查询 53 4.1 find简介 53 4.1.1 指定需要返回的键 54 4.1.2 限制 55 4.2 查询条件 55 4.2.1 查询条件 55 4.2.2 OR查询 56 4.2.3 $not 57 4.2.4 条件语义 57 4.3 特定类型的查询 58 4.3.1 null 58 4.3.2 正则表达式 59 4.3.3 查询数组 59 4.3.4 查询内嵌文档 64 4.4 $where查询 65 4.5 游标 67 4.5.1 limit、skip和sort 69 4.5.2 避免使用skip略过大量结果 70 4.5.3 高级查询选项 72 4.5.4 获取一致结果 73 4.5.5 游标生命周期 75 4.6 数据库命令 75 第二部分 设计应用 第5章 索引 81 5.1 索引简介 81 5.1.1 复合索引简介 84 5.1.2 使用复合索引 90 5.1.3 $操作符如何使用索引 91 5.1.4 索引对象和数组 96 5.1.5 索引基数 98 5.2 使用explain（）和hint（） 98 5.3 何时不应该使用索引 103 5.4 索引类型 104 5.4.1 唯一索引 104 5.4.2 稀疏索引 106 5.5 索引管理 107 5.5.1 标识索引 108 5.5.2 修改索引 108 第6章 特殊的索引和集合 111 6.1 固定集合 111 6.1.1 创建固定集合 113 6.1.2 自然排序 113 6.1.3 循环游标 115 6.1.4 没有id索引的集合 115</span><br><span class="line">6.2 TTL索引 116</span><br><span class="line">6.3 全文本索引 116</span><br><span class="line">6.3.1 搜索语法 119</span><br><span class="line">6.3.2 优化全文本搜索 120</span><br><span class="line">6.3.3 在其他语言中搜索 121</span><br><span class="line">6.4 地理空间索引 121</span><br><span class="line">6.4.1 地理空间查询的类型 122</span><br><span class="line">6.4.2 复合地理空间索引 123</span><br><span class="line">6.4.3 2d索引 123</span><br><span class="line">6.5 使用GridFS存储文件 125</span><br><span class="line">6.5.1 GridFS入门 126</span><br><span class="line">6.5.2 在MongoDB驱动程序中使用GridFS 126</span><br><span class="line">6.5.3 揭开GridFS的面纱 127</span><br><span class="line">第7章 聚合 129</span><br><span class="line">7.1 聚合框架 129</span><br><span class="line">7.2 管道操作符 131</span><br><span class="line">7.2.1 $match 132</span><br><span class="line">7.2.2 $project 132</span><br><span class="line">7.2.3 $group 137</span><br><span class="line">7.2.4 $unwind 140</span><br><span class="line">7.2.5 $sort 141</span><br><span class="line">7.2.6 $limit 142</span><br><span class="line">7.2.7 $skip 142</span><br><span class="line">7.2.8 使用管道 142</span><br><span class="line">7.3 MapReduce 143</span><br><span class="line">7.3.1 示例1：找出集合中的所有键 143</span><br><span class="line">7.3.2 示例2：网页分类 145</span><br><span class="line">7.3.3 MongoDB和MapReduce 146</span><br><span class="line">7.4 聚合命令 148</span><br><span class="line">7.4.1 count 149</span><br><span class="line">7.4.2 distinct 149</span><br><span class="line">7.4.3 group 150</span><br><span class="line">第8章 应用程序设计 155</span><br><span class="line">8.1 范式化与反范式化 155</span><br><span class="line">8.1.1 数据表示的例子 156</span><br><span class="line">8.1.2 基数 159</span><br><span class="line">8.1.3 好友、粉丝，以及其他的麻烦事项 160</span><br><span class="line">8.2 优化数据操作 162</span><br><span class="line">8.2.1 优化文档增长 162</span><br><span class="line">8.2.2 删除旧数据 164</span><br><span class="line">8.3 数据库和集合的设计 164</span><br><span class="line">8.4 一致性管理 165</span><br><span class="line">8.5 模式迁移 166</span><br><span class="line">8.6 不适合使用MongoDB的场景 167</span><br><span class="line">第三部分 复制</span><br><span class="line">第9章 创建副本集 171</span><br><span class="line">9.1 复制简介 171</span><br><span class="line">9.2 建立副本集 172</span><br><span class="line">9.3 配置副本集 176</span><br><span class="line">9.3.1 rs辅助函数 178</span><br><span class="line">9.3.2 网络注意事项 178</span><br><span class="line">9.4 修改副本集配置 178</span><br><span class="line">9.5 设计副本集 180</span><br><span class="line">9.6 成员配置选项 184</span><br><span class="line">9.6.1 选举仲裁者 184</span><br><span class="line">9.6.2 优先级 185</span><br><span class="line">9.6.3 隐藏成员 186</span><br><span class="line">9.6.4 延迟备份节点 187</span><br><span class="line">9.6.5 创建索引 187</span><br><span class="line">第10章 副本集的组成 189</span><br><span class="line">10.1 同步 189</span><br><span class="line">10.1.1 初始化同步 190</span><br><span class="line">10.1.2 处理陈旧数据 193</span><br><span class="line">10.2 心跳 193</span><br><span class="line">10.3 选举 195</span><br><span class="line">10.4 回滚 195</span><br><span class="line">第11章 从应用程序连接副本集 201</span><br><span class="line">11.1 客户端到副本集的连接 201</span><br><span class="line">11.2 等待写入复制 202</span><br><span class="line">11.2.1 可能导致错误的原因 203</span><br><span class="line">11.2.2 其他值 204</span><br><span class="line">11.3 自定义复制保证规则 204</span><br><span class="line">11.3.1 保证复制到每个数据中心的一台服务器上 204</span><br><span class="line">11.3.2 保证写操作被复制到可见节点中的“大多数” 206</span><br><span class="line">11.3.3 创建其他规则 206</span><br><span class="line">11.4 将读请求发送到备份节点 207</span><br><span class="line">11.4.1 出于一致性考虑 207</span><br><span class="line">11.4.2 出于负载的考虑 208</span><br><span class="line">11.4.3 何时可以从备份节点读取数据 208</span><br><span class="line">第12章 管理 211</span><br><span class="line">12.1 以单机模式启动成员 211</span><br><span class="line">12.2 副本集配置 212</span><br><span class="line">12.2.1 创建副本集 212</span><br><span class="line">12.2.2 修改副本集成员 213</span><br><span class="line">12.2.3 创建比较大的副本集 213</span><br><span class="line">12.2.4 强制重新配置 214</span><br><span class="line">12.3 修改成员状态 215</span><br><span class="line">12.3.1 把主节点变为备份节点 215</span><br><span class="line">12.3.2 阻止选举 215</span><br><span class="line">12.3.3 使用维护模式 215</span><br><span class="line">12.4 监控复制 216</span><br><span class="line">12.4.1 获取状态 216</span><br><span class="line">12.4.2 复制图谱 218</span><br><span class="line">12.4.3 复制循环 220</span><br><span class="line">12.4.4 禁用复制链 220</span><br><span class="line">12.4.5 计算延迟 221</span><br><span class="line">12.4.6 调整oplog大小 222</span><br><span class="line">12.4.7 从延迟备份节点中恢复 223</span><br><span class="line">12.4.8 创建索引 224</span><br><span class="line">12.4.9 在预算有限的情况下进行复制 225</span><br><span class="line">12.4.10 主节点如何跟踪延迟 226</span><br><span class="line">12.5 主从模式 227</span><br><span class="line">12.5.1 从主从模式切换到副本集模式 228</span><br><span class="line">12.5.2 让副本集模仿主从模式的行为 228</span><br><span class="line">第四部分 分片</span><br><span class="line">第13章 分片 233</span><br><span class="line">13.1 分片简介 233</span><br><span class="line">13.2 理解集群的组件 234</span><br><span class="line">13.3 快速建立一个简单的集群 235</span><br><span class="line">第14章 配置分片 243</span><br><span class="line">14.1 何时分片 243</span><br><span class="line">14.2 启动服务器 244</span><br><span class="line">14.2.1 配置服务器 244</span><br><span class="line">14.2.2 mongos进程 245</span><br><span class="line">14.2.3 将副本集转换为分片 245</span><br><span class="line">14.2.4 增加集群容量 247</span><br><span class="line">14.2.5 数据分片 247</span><br><span class="line">14.3 MongoDB如何追踪集群数据 248</span><br><span class="line">14.3.1 块范围 249</span><br><span class="line">14.3.2 拆分块 250</span><br><span class="line">14.4 均衡器 254</span><br><span class="line">第15章 选择片键 257</span><br><span class="line">15.1 检查使用情况 257</span><br><span class="line">15.2 数据分发 258</span><br><span class="line">15.2.1 升序片键 258</span><br><span class="line">15.2.2 随机分发的片键 261</span><br><span class="line">15.2.3 基于位置的片键 262</span><br><span class="line">15.3 片键策略 263</span><br><span class="line">15.3.1 散列片键 264</span><br><span class="line">15.3.2 GridFS的散列片键 265</span><br><span class="line">15.3.3 流水策略 266</span><br><span class="line">15.3.4 多热点 267</span><br><span class="line">15.4 片键规则和指导方针 270</span><br><span class="line">15.4.1 片键限制 270</span><br><span class="line">15.4.2 片键的势 270</span><br><span class="line">15.5 控制数据分发 270</span><br><span class="line">15.5.1 对多个数据库和集合使用一个集群 270</span><br><span class="line">15.5.2 手动分片 272</span><br><span class="line">第16章 分片管理 275</span><br><span class="line">16.1 检查集群状态 275</span><br><span class="line">16.1.1 使用sh.status查看集群摘要信息 275</span><br><span class="line">16.1.2 检查配置信息 277</span><br><span class="line">16.2 查看网络连接 282</span><br><span class="line">16.2.1 查看连接统计 283</span><br><span class="line">16.2.2 限制连接数量 283</span><br><span class="line">16.3 服务器管理 285</span><br><span class="line">16.3.1 添加服务器 285</span><br><span class="line">16.3.2 修改分片的服务器 285</span><br><span class="line">16.3.3 删除分片 286</span><br><span class="line">16.3.4 修改配置服务器 288</span><br><span class="line">16.4 数据均衡 289</span><br><span class="line">16.4.1 均衡器 289</span><br><span class="line">16.4.2 修改块大小 290</span><br><span class="line">16.4.3 移动块 290</span><br><span class="line">16.4.4 特大块 292</span><br><span class="line">16.4.5 刷新配置 295</span><br><span class="line">第五部分 应用管理</span><br><span class="line">第17章 了解应用的动态 299</span><br><span class="line">17.1 了解正在进行的操作 299</span><br><span class="line">17.1.1 寻找有问题的操作 301</span><br><span class="line">17.1.2 终止操作的执行 301</span><br><span class="line">17.1.3 假象 302</span><br><span class="line">17.1.4 避免幽灵操作 302</span><br><span class="line">17.2 使用系统分析器 303</span><br><span class="line">17.3 计算空间消耗 305</span><br><span class="line">17.3.1 文档 305</span><br><span class="line">17.3.2 集合 305</span><br><span class="line">17.3.3 数据库 306</span><br><span class="line">17.4 使用mongotop和monogostat 307</span><br><span class="line">第18章 数据管理 311</span><br><span class="line">18.1 配置身份验证 311</span><br><span class="line">18.1.1 身份验证基本原理 312</span><br><span class="line">18.1.2 配置身份验证 313</span><br><span class="line">18.1.3 身份验证的工作原理 314</span><br><span class="line">18.2 建立和删除索引 315</span><br><span class="line">18.2.1 在独立的服务器上建立索引 315</span><br><span class="line">18.2.2 在副本集上建立索引 315</span><br><span class="line">18.2.3 在分片集群上建立索引 316</span><br><span class="line">18.2.4 删除索引 316</span><br><span class="line">18.2.5 注意内存溢出杀手 316</span><br><span class="line">18.3 预热数据 317</span><br><span class="line">18.3.1 将数据库移至内存 317</span><br><span class="line">18.3.2 将集合移至内存 318</span><br><span class="line">18.3.3 自定义预热 318</span><br><span class="line">18.4 压缩数据 320</span><br><span class="line">18.5 移动集合 321</span><br><span class="line">18.6 预分配数据文件 322</span><br><span class="line">第19章 持久性 323</span><br><span class="line">19.1 日记系统的用途 323</span><br><span class="line">19.1.1 批量提交写入操作 324</span><br><span class="line">19.1.2 设定提交时间间隔 325</span><br><span class="line">19.2 关闭日记系统 325</span><br><span class="line">19.2.1 替换数据文件 325</span><br><span class="line">19.2.2 修复数据文件 326</span><br><span class="line">19.2.3 关于mongod.lock文件 326</span><br><span class="line">19.2.4 隐蔽的异常退出 327</span><br><span class="line">19.3 MongoDB无法保证的事项 327</span><br><span class="line">19.4 检验数据损坏 327</span><br><span class="line">19.5 副本集中的持久性 329</span><br><span class="line">第六部分 服务器管理</span><br><span class="line">第20章 启动和停止MongoDB 333</span><br><span class="line">20.1 从命令行启动 333</span><br><span class="line">20.2 停止MongoDB 336</span><br><span class="line">20.3 安全性 337</span><br><span class="line">20.3.1 数据加密 338</span><br><span class="line">20.3.2 SSL安全连接 338</span><br><span class="line">20.4 日志 338</span><br><span class="line">第21章 监控MongoDB 341</span><br><span class="line">21.1 监控内存使用状况 341</span><br><span class="line">21.1.1 有关电脑内存的介绍 341</span><br><span class="line">21.1.2 跟踪监测内存使用状况 342</span><br><span class="line">21.1.3 跟踪监测缺页中断 343</span><br><span class="line">21.1.4 减少索引树的脱靶次数 345</span><br><span class="line">21.1.5 IO延迟 345</span><br><span class="line">21.1.6 跟踪监测后台刷新平均时间 346</span><br><span class="line">21.2 计算工作集的大小 347</span><br><span class="line">21.3 跟踪监测性能状况 349</span><br><span class="line">21.4 监控副本集 352</span><br><span class="line">第22章 备份 355</span><br><span class="line">22.1 对服务器进行备份 355</span><br><span class="line">22.1.1 文件系统快照 355</span><br><span class="line">22.1.2 复制数据文件 356</span><br><span class="line">22.1.3 使用mongodump 357</span><br><span class="line">22.2 对副本集进行备份 359</span><br><span class="line">22.3 对分片集群进行备份 360</span><br><span class="line">22.3.1 备份和恢复整个集群 360</span><br><span class="line">22.3.2 备份和恢复单独的分片 360</span><br><span class="line">22.4 使用mongooplog进行增量备份 361</span><br><span class="line">第23章 部署MongoDB 363</span><br><span class="line">23.1 设计系统结构 363</span><br><span class="line">23.1.1 选择存储介质 363</span><br><span class="line">23.1.2 推荐的RAID配置 367</span><br><span class="line">23.1.3 CPU 368</span><br><span class="line">23.1.4 选择操作系统 368</span><br><span class="line">23.1.5 交换空间 369</span><br><span class="line">23.1.6 文件系统 369</span><br><span class="line">23.2 虚拟化 370</span><br><span class="line">23.2.1 禁止内存过度分配 370</span><br><span class="line">23.2.2 神秘的内存 370</span><br><span class="line">23.2.3 处理网络磁盘的IO问题 371</span><br><span class="line">23.2.4 使用非网络磁盘 372</span><br><span class="line">23.3 系统配置 372</span><br><span class="line">23.3.1 禁用NUMA 372</span><br><span class="line">23.3.2 更智能地预读取数据 375</span><br><span class="line">23.3.3 禁用大内存页面 376</span><br><span class="line">23.3.4 选择一种磁盘调度算法 377</span><br><span class="line">23.3.5 不要记录访问时间 377</span><br><span class="line">23.3.6 修改限制 378</span><br><span class="line">23.4 网络配置 379</span><br><span class="line">23.5 系统管理 381</span><br><span class="line">23.5.1 时钟同步 381</span><br><span class="line">23.5.2 OOMKiller 381</span><br><span class="line">23.5.3 关闭定期任务 382</span><br><span class="line">附录A 安装MongoDB 383</span><br><span class="line">附录B 深入MongoDB 387</span><br></pre></td></tr></table></figure>


<h1 id="亚马逊链接"><a href="#亚马逊链接" class="headerlink" title="亚马逊链接"></a>亚马逊链接</h1><p><a href="http://www.amazon.cn/gp/product/B00HLX035Q/ref=as_li_ss_tl?ie=UTF8&camp=536&creative=3132&creativeASIN=B00HLX035Q&linkCode=as2&tag=bringmeluck-23" target="_blank" rel="noopener"><img src="http://ec4.images-amazon.com/images/I/518fJU-ijYL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA300_SH20_OU28_.jpg"/></a></p>

    </div>

    
    
    
        

  <div class="followme">
    <p>欢迎关注我的其它发布渠道</p>

    <div class="social-list">

        <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
        </div>
    </div>
  </div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" rel="tag"># 数据库</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/04/19/B00HFID4QW/" rel="prev" title="大规模并行处理器编程实战(第2版)">
      <i class="fa fa-chevron-left"></i> 大规模并行处理器编程实战(第2版)
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/04/19/B00H8VUHD4/" rel="next" title="软件定义网络(英文)">
      软件定义网络(英文) <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#基本信息"><span class="nav-number">1.</span> <span class="nav-text">基本信息</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#简单介绍"><span class="nav-number">2.</span> <span class="nav-text">简单介绍</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#目录"><span class="nav-number">3.</span> <span class="nav-text">目录</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#亚马逊链接"><span class="nav-number">4.</span> <span class="nav-text">亚马逊链接</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">ryo</p>
  <div class="site-description" itemprop="description">收集常见的 it 书籍，供学习之用</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">396</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">40</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/houbb" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;houbb" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="/houbinbin.echo@gmail.com" title="E-Mail → houbinbin.echo@gmail.com"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ryo</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>




  
<script src="/js/local-search.js"></script>













  

  

</body>
</html>
